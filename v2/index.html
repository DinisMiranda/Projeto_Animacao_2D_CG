<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cidade Sustentável – v2</title>
  <link rel="stylesheet" href="./style.css">
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin: 0; background: #0e1116; color: #e6e8ee; }
    header { padding: 12px 16px; background: #161a22; border-bottom: 1px solid #1f2530; display:flex; align-items:center; gap:16px; }
    main { display: grid; place-items: center; min-height: calc(100vh - 60px); padding: 16px; }
    canvas { width: min(96vw, 1100px); height: auto; max-height: 70vh; background: linear-gradient(#7cc7ff, #cfeaff); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.05); }
    label { color:#a3adc2; }
  </style>
</head>
<body>
  <header>
    <h2 style="margin:0; flex:1">Cidade Sustentável – v2 (Solar + Reciclagem)</h2>
    <label><input id="chkSolar" type="checkbox"> Energia Solar</label>
    <label><input id="chkRecycling" type="checkbox"> Reciclagem</label>
  </header>
  <main>
    <canvas id="c" width="960" height="540"></canvas>
  </main>

  <script>
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    let t = 0;
    const state = { solar:false, recycling:false };
    document.getElementById('chkSolar').addEventListener('change', e=> state.solar = e.target.checked);
    document.getElementById('chkRecycling').addEventListener('change', e=> state.recycling = e.target.checked);
    function circle(x, y, r) { ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI*2); ctx.closePath(); ctx.fill(); }
    const clouds=[0,180,360,540,720];
    function lerpColor(a,b,t){function h2r(h){h=h.replace('#','');if(h.length===3)h=h.split('').map(c=>c+c).join('');const n=parseInt(h,16);return{r:(n>>16)&255,g:(n>>8)&255,b:n&255}}const ca=h2r(a),cb=h2r(b);const r=Math.round(ca.r+(cb.r-ca.r)*t),g=Math.round(ca.g+(cb.g-ca.g)*t),bl=Math.round(ca.b+(cb.b-ca.b)*t);return `rgb(${r},${g},${bl})`;}
    function frame(){
      t+=16;
      const score=(state.solar?0.5:0)+(state.recycling?0.5:0);
      // sky
      const top=lerpColor('#78b7ff','#9be7ff',score*0.6), bottom=lerpColor('#c6e0ff','#e9f7ff',score*0.6);
      const grd=ctx.createLinearGradient(0,0,0,canvas.height); grd.addColorStop(0,top); grd.addColorStop(1,bottom);
      ctx.fillStyle=grd; ctx.fillRect(0,0,canvas.width,canvas.height);
      // sun
      ctx.fillStyle = state.solar ? '#ffd166':'#ffb703'; circle(820 + Math.sin(t*0.0003)*20, 90, 26);
      // clouds
      ctx.fillStyle='#fff'; ctx.globalAlpha = 0.7 - score*0.3;
      for (let i=0;i<clouds.length;i++) { const x=((clouds[i]+t*0.03)%1200)-100; const y=60+i*18; circle(x,y,20); circle(x+24,y-6,16); circle(x+46,y,22);} ctx.globalAlpha=1;
      // ground
      ctx.fillStyle=lerpColor('#7a8a99','#7acb92',score*0.8); ctx.fillRect(0,420,canvas.width,120);
      // road
      ctx.fillStyle='#444c5a'; ctx.fillRect(0,440,canvas.width,60);
      ctx.strokeStyle='#cfd7e6'; ctx.setLineDash([18,14]); ctx.lineWidth=3; ctx.beginPath(); ctx.moveTo(-(t/8%32),470); ctx.lineTo(canvas.width,470); ctx.stroke(); ctx.setLineDash([]);
      // buildings
      const buildings=[{x:60,w:120,h:180},{x:210,w:90,h:220},{x:320,w:150,h:200},{x:500,w:110,h:230},{x:650,w:140,h:190}];
      buildings.forEach((b)=>{ ctx.fillStyle=lerpColor('#445066','#5a7aa0',score*0.4); ctx.fillRect(b.x,420-b.h,b.w,b.h);
        if(state.solar){ ctx.fillStyle='#2d6a4f'; ctx.fillRect(b.x+8,420-b.h-10,b.w-16,6); ctx.fillStyle='#74c69d'; for(let i=0;i<Math.floor((b.w-16)/18);i++){ ctx.fillRect(b.x+10+i*18,420-b.h-9,14,4); } }
      });
      // recycling bins
      if(state.recycling){ [{x:140,c:'#2d6cdf'},{x:180,c:'#f5cb5c'},{x:220,c:'#3cb371'}].forEach(b=>{ ctx.fillStyle=b.c; ctx.fillRect(b.x,408,22,26); ctx.fillStyle='#0c111a'; ctx.fillRect(b.x+4,404,14,6);}); }
      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);
  </script>
</body>
</html>

